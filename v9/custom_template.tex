\documentclass[$if(fontsize)$$fontsize$,$endif$$if(lang)$$babel-lang$,$endif$$if(papersize)$$papersize$paper,$endif$$for(classoption)$$classoption$$sep$,$endfor$]{$documentclass$}
\usepackage{fontspec}
\usepackage{polyglossia}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{fancyvrb}
\usepackage{longtable,booktabs,array}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{url}
\usepackage{xltxtra,xunicode}

\setmainlanguage{english}
\setotherlanguage{gujarati}

% Set fonts
\setmainfont{$if(mainfont)$$mainfont$$else$Noto Sans$endif$}
\newfontfamily\gujaratifont{$if(gujaratifont)$$gujaratifont$$else$Noto Sans Gujarati$endif$}[Script=Gujarati]

% Configure listings for code highlighting
\lstset{
    basicstyle=\ttfamily\small,
    breaklines=true,
    columns=flexible,
    keepspaces=true,
    numbers=left,
    numberstyle=\tiny\color{gray},
    showstringspaces=false,
    frame=single,
    framesep=3pt
}

% Define tightlist command
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

$if(highlighting-macros)$
$highlighting-macros$
$endif$

$if(title)$
\title{$title$}
$endif$
$if(author)$
\author{$for(author)$$author$$sep$ \and $endfor$}
$endif$
$if(date)$
\date{$date$}
$endif$

\begin{document}

$if(title)$
\maketitle
$endif$

$for(include-before)$
$include-before$

$endfor$
$if(toc)$
$if(toc-title)$
\renewcommand*\contentsname{$toc-title$}
$endif$
\tableofcontents
$endif$
$if(lot)$
\listoftables
$endif$
$if(lof)$
\listoffigures
$endif$

$body$

$for(include-after)$
$include-after$

$endfor$
\end{document}